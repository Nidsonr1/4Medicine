<div class="modal">
  <form nz-form class="modal-form" [formGroup]="validateFormShareReport">
    <div class="modal-form-search-doctor">
      <p>
        <span class="required">*</span> Médico:
        <span
          *ngIf="validateFormShareReport.value.doctorId"
          class="sucess-icon"
          nz-icon
          nzType="check-circle"
          nzTheme="fill"
        ></span>
        <span
          *ngIf="!validateFormShareReport.value.doctorId && resultDoctors"
          class="error-icon"
          nz-icon
          nzType="close-circle"
          nzTheme="fill"
        ></span>
      </p>

      <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton">
        <input
          nz-input
          type="text"
          id="doctorName"
          formControlName="doctorName"
          placeholder="Informe o nome do paciente"
          [(ngModel)]="validateFormShareReport.value.doctorName"
        />
      </nz-input-group>
      <ng-template #suffixIconButton>
        <button
          nz-button
          nzType="primary"
          nzSearch
          [disabled]="!validateFormShareReport.value.doctorName"
          (click)="searchDoctors(validateFormShareReport.value.doctorName)"
        >
          <span nz-icon nzType="search"></span>
        </button>
      </ng-template>

      <div class="modal-form-search-doctor-result" *ngIf="resultDoctors">
        <div
          *ngIf="resultDoctors.length"
          class="modal-form-search-doctor-result-with-data"
        >
          <nz-alert
            nzShowIcon
            nzType="warning"
            nzMessage="Atenção no CRM para médicos com o mesmo nome!"
            nzCloseable
          ></nz-alert>

          <nz-form-item>
            <nz-radio-group id="doctorId" formControlName="doctorId">
              <label
                nz-radio
                [nzValue]="doctor.id"
                *ngFor="let doctor of resultDoctors"
              >
                {{ doctor.name }} - {{ doctor.CRM }}</label
              >
            </nz-radio-group>
          </nz-form-item>
        </div>
        <div
          *ngIf="!resultDoctors.length"
          class="modal-form-search-doctor-result-without-data"
        >
          <span nz-icon nzType="robot" nzTheme="outline"></span>
          <p>Esse usuário não existe</p>
        </div>
      </div>
    </div>

    <div class="modal-form-footer">
      <button nz-button nzType="default" (click)="closeModal()">
        Cancelar
      </button>

      <button
        nz-button
        nzType="primary"
        (click)="shareReport()"
        [disabled]="!validateFormShareReport.valid"
      >
        Compartilhar
      </button>
    </div>
  </form>
</div>
